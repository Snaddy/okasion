<% if flash.now[:notice] %>
<div class="messages">
    <div class="alert alert-info">
    	<%= flash[:notice] %>
    </div>
</div>
<% end %>

<div class="index">

<div class="search-filters">
<div class="filter-fields">
	<%= form_tag '/events', :method => :get do %>
        <%= hidden_field_tag :search, params[:search] %>
        <div class="form-field">
			<%= label :date, 'Date' %><br>
	        <%= date_select :date_filter, '' , start_year: Time.now.year, end_year: Time.now.year + 5, prompt: true %>
		</div>

          <div class="form-field">
			  <%= label :Category, 'Category' %><br>
			  <%= select_tag :with_category, options_for_select(['Art', 'Educational', 'Entertainment', 'Family', 'Festivals', 'Fitness', 'Food and Drinks', 'Fundraising', 'Music', 'Outdoors', 'Sports'], params[:with_category]), :prompt => "All categories" %>
		  </div>
            
            <div class="actions">
            <%= submit_tag "Apply filters", class: "btn btn-primary filter-btn", name: 'filter'%> 
            </div>
    <% end %>
</div>
</div>

	<div class="feed">
		<div class="events">
			<%= render @events %>
		</div>
		<div class="pagination">
			<%= will_paginate @events %>
		</div>
		<% if @events.next_page %>
			<div id="load-more-posts" class="btn btn-primary"> Load more posts</div>
		<% end %>

		<% if @events.count == 0 %>
			<% if @date || params[:with_category]%>
			<div class="no-results">
				0 results <%= 'for' + @date.strftime("%B, %-d, %Y") unless @date.blank? %>
				<%= 'in ' + params[:with_category] unless params[:with_category].blank? %>  
			</div>
			<% else %>
			<div class="no-results">
				No events found
			</div>
			<% end %>
		<% end %>
	</div>
</div>